<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sign Up - EduBridge</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600|Roboto:300,400,500" rel="stylesheet">
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- AOS Animation Library CSS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <style>
    /* CSS Variables for Dynamic Colors */
    :root {
      --gemini-gradient: linear-gradient(90deg, #4776E6, #8E54E9, #FF4081);
      --card-shadow: 0 15px 35px rgba(0,0,0,0.1);
      --input-bg: #f9fafc;
      --primary-color: #1e88e5;
      --card-radius: 16px;
    }
    
    /* Global reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Roboto', sans-serif; 
      background: linear-gradient(135deg, #1e3c72, #2a5298, #1565C0);
      color: #333; 
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      position: relative;
      overflow-x: hidden;
    }
    
    /* Animated background */
    .background-shapes {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }
    
    .shape {
      position: absolute;
      opacity: 0.4;
      filter: blur(80px);
      border-radius: 50%;
    }
    
    .shape-1 {
      background: rgba(71, 118, 230, 0.6);
      width: 500px;
      height: 500px;
      top: -250px;
      left: -250px;
      animation: float 20s ease-in-out infinite alternate;
    }
    
    .shape-2 {
      background: rgba(142, 84, 233, 0.6);
      width: 400px;
      height: 400px;
      top: 60%;
      right: -200px;
      animation: float 15s ease-in-out infinite alternate-reverse;
    }
    
    .shape-3 {
      background: rgba(255, 64, 129, 0.4);
      width: 300px;
      height: 300px;
      bottom: -150px;
      left: 30%;
      animation: float 18s ease-in-out infinite alternate;
    }
    
    @keyframes float {
      0% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(-40px, 20px) rotate(10deg); }
      100% { transform: translate(40px, -20px) rotate(-10deg); }
    }
    
    /* Particle effects */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    
    .container { 
      max-width: 550px; 
      width: 100%; 
      margin: 0 auto; 
      position: relative;
      z-index: 10;
    }
    
    .signup-card {
      background: rgba(255, 255, 255, 0.95);
      padding: 2.5rem;
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      transform: translateY(0);
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow: hidden;
      position: relative;
    }
    
    .signup-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: var(--gemini-gradient);
      background-size: 200% auto;
      animation: gradientShift 5s linear infinite;
    }
    
    .signup-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* Logo */
    .logo-container {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .logo {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.2rem;
      font-weight: 600;
      background: var(--gemini-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      background-size: 200% auto;
      animation: gradientShift 5s ease infinite;
      display: inline-block;
    }
    
    .logo-divider {
      width: 50px;
      height: 4px;
      background: var(--gemini-gradient);
      background-size: 200% auto;
      animation: gradientShift 5s linear infinite;
      margin: 0.5rem auto 0;
      border-radius: 2px;
    }
    
    h2 { 
      text-align: center; 
      margin-bottom: 1.5rem; 
      font-family: 'Montserrat', sans-serif; 
      color: var(--primary-color);
      font-size: 1.6rem;
    }
    
    /* Tabs */
    .tab-buttons { 
      display: flex; 
      justify-content: center; 
      margin-bottom: 2rem; 
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .tab-buttons button { 
      flex: 1; 
      padding: 0.9rem 0.75rem; 
      background: #f5f7fa; 
      border: none; 
      cursor: pointer; 
      font-weight: 600;
      font-family: 'Montserrat', sans-serif; 
      color: #666;
      position: relative;
      z-index: 1;
      transition: all 0.3s ease;
      overflow: hidden;
    }
    
    .tab-buttons button.active { 
      color: #a200ff; 
    }
    
    .tab-buttons::after {
      content: "";
      position: absolute;
      width: 50%;
      height: 100%;
      left: 0;
      top: 0;
      background: var(--gemini-gradient);
      background-size: 200% auto;
      animation: gradientShift 5s linear infinite;
      transition: all 0.3s ease;
      z-index: 0;
      border-radius: 8px;
    }
    
    .tab-buttons.student-active::after {
      left: 50%;
    }
    
    .tab-content { 
      display: none; 
      animation: fadeIn 0.5s ease forwards;
    }
    
    .tab-content.active { 
      display: block; 
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    form { 
      display: flex; 
      flex-direction: column; 
      gap: 1.2rem; 
    }
    
    .form-group {
      position: relative;
    }
    
    label { 
      font-weight: 500; 
      margin-bottom: 0.5rem; 
      color: #555;
      display: block;
      transition: all 0.3s;
      font-size: 0.9rem;
    }
    
    .form-control {
      position: relative;
    }
    
    .form-control i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #aaa;
      transition: all 0.3s;
    }
    
    input[type="text"], 
    input[type="email"], 
    input[type="password"], 
    input[type="number"] { 
      width: 100%; 
      padding: 0.9rem 1rem 0.9rem 2.8rem; 
      border: 1px solid #e0e0e0; 
      border-radius: 8px; 
      font-size: 1rem; 
      background: var(--input-bg);
      transition: all 0.3s;
    }
    
    input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(30,136,229,0.1);
      background: white;
      outline: none;
    }
    
    input:focus + i {
      color: var(--primary-color);
    }
    
    .verification { 
      display: flex; 
      gap: 0.5rem; 
    }
    
    .verification input { 
      flex: 1; 
    }
    
    .verification button { 
      flex-shrink: 0; 
      padding: 0 1.5rem; 
      border: none; 
      background: var(--gemini-gradient);
      background-size: 200% auto;
      animation: gradientShift 10s linear infinite;
      color: #fff; 
      border-radius: 8px; 
      cursor: pointer; 
      transition: all 0.3s;
      font-weight: 500;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    .verification button:hover { 
      background-position: right center;
      box-shadow: 0 6px 15px rgba(30,136,229,0.2);
      transform: translateY(-2px);
    }
    
    button.submit-btn { 
      padding: 1rem 0.75rem; 
      border: none; 
      border-radius: 8px; 
      background: var(--gemini-gradient);
      background-size: 200% auto;
      animation: gradientShift 5s linear infinite;
      color: #fff; 
      font-size: 1rem; 
      cursor: pointer; 
      font-weight: 600;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-top: 0.5rem;
    }
    
    button.submit-btn:hover { 
      background-position: right center;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(30,136,229,0.3);
    }
    
    .links { 
      text-align: center; 
      margin-top: 1.5rem; 
    }
    
    .links a { 
      color: var(--primary-color); 
      font-weight: 500;
      text-decoration: none;
      position: relative;
      display: inline-block;
    }
    
    .links a::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 2px;
      bottom: -2px;
      left: 0;
      background: var(--gemini-gradient);
      background-size: 200% auto;
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.4s cubic-bezier(0.86, 0, 0.07, 1);
    }
    
    .links a:hover::after {
      transform: scaleX(1);
      transform-origin: left;
    }
    
    /* Floating labels effect */
    input:focus + i + .floating-label,
    input:not(:placeholder-shown) + i + .floating-label {
      top: -10px;
      left: 10px;
      font-size: 0.8rem;
      opacity: 1;
      color: var(--primary-color);
    }
    
    .floating-label {
      position: absolute;
      pointer-events: none;
      left: 2.8rem;
      top: 50%;
      transform: translateY(-50%);
      transition: all 0.3s ease;
      opacity: 0.7;
      font-size: 0.95rem;
    }
    
    input::placeholder {
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    input:focus::placeholder {
      opacity: 0.5;
    }
    
    /* Password strength indicator */
    .password-strength {
      width: 100%;
      height: 5px;
      background: #e0e0e0;
      margin-top: 0.3rem;
      border-radius: 3px;
      overflow: hidden;
      transition: all 0.3s;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0;
      border-radius: 3px;
      transition: all 0.3s ease;
    }
    
    .password-strength-text {
      font-size: 0.8rem;
      margin-top: 0.3rem;
      text-align: right;
    }
    
    /* Success indicator for fields */
    .form-control.valid i.valid-icon {
      display: block;
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #4CAF50;
    }
    
    .form-control.valid input {
      border-color: #4CAF50;
      padding-right: 2.5rem;
    }
    
    .form-control i.valid-icon {
      display: none;
    }
    
    /* Fixed tab button text color */
    .tab-buttons button {
      color: #333;
    }
    
    /* Responsive */
    @media (max-width: 576px) {
      .signup-card {
        padding: 2rem 1.5rem;
      }
      
      .logo {
        font-size: 1.8rem;
      }
      
      h2 {
        font-size: 1.4rem;
      }
      
      .verification {
        flex-direction: column;
      }
      
      .verification button {
        width: 100%;
        padding: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Animated background shapes -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>
  
  <!-- Particles background -->
  <div id="particles-js" class="particles"></div>
  
  <div class="container" data-aos="fade-up">
    <div class="signup-card">
      <div class="logo-container">
        <div class="logo">EduBridge</div>
        <div class="logo-divider"></div>
      </div>
      
      <h2>Create Your Account</h2>
      
      <div class="tab-buttons" id="tabButtonsContainer">
        <button id="teacherTab" class="active" onclick="showTab('teacher')">Teacher</button>
        <button id="studentTab" onclick="showTab('student')">Student</button>
      </div>
      
      <!-- Teacher Signup Form -->
      <div id="teacher" class="tab-content active">
        <form id="teacherForm" action="/signup/teacher" method="POST">
          <div class="form-group">
            <div class="form-control">
              <input type="text" id="teacherName" name="name" placeholder="Your full name" required>
              <i class="fas fa-user"></i>
              <span class="floating-label">Full Name</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="text" id="teacherOrg" name="organization" placeholder="Your organization" required>
              <i class="fas fa-building"></i>
              <span class="floating-label">Organization</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="email" id="teacherEmail" name="email" placeholder="Your email" required>
              <i class="fas fa-envelope"></i>
              <span class="floating-label">Email</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="password" id="teacherPassword" name="password" placeholder="Choose a password" required>
              <i class="fas fa-lock"></i>
              <span class="floating-label">Password</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
            <div class="password-strength">
              <div class="password-strength-bar" id="teacherPasswordStrength"></div>
            </div>
            <div class="password-strength-text" id="teacherPasswordStrengthText"></div>
          </div>
          
          <div class="form-group">
            <div class="verification">
              <div class="form-control">
                <input type="number" name="verificationCode" placeholder="Enter code" required>
                <i class="fas fa-shield-alt"></i>
                <span class="floating-label">Verification Code</span>
              </div>
              <button type="button" onclick="sendVerification('teacherEmail', 'teacher')">Send Code</button>
            </div>
          </div>
          
          <button type="submit" class="submit-btn">Sign Up as Teacher</button>
        </form>
      </div>
      
      <!-- Student Signup Form -->
      <div id="student" class="tab-content">
        <form id="studentForm" action="/signup/student" method="POST">
          <div class="form-group">
            <div class="form-control">
              <input type="text" id="studentName" name="name" placeholder="Your full name" required>
              <i class="fas fa-user"></i>
              <span class="floating-label">Full Name</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="text" id="studentOrg" name="organization" placeholder="Your school/organization" required>
              <i class="fas fa-school"></i>
              <span class="floating-label">Organization/School</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="email" id="studentEmail" name="email" placeholder="Your email" required>
              <i class="fas fa-envelope"></i>
              <span class="floating-label">Email</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <div class="form-control">
              <input type="password" id="studentPassword" name="password" placeholder="Choose a password" required>
              <i class="fas fa-lock"></i>
              <span class="floating-label">Password</span>
              <i class="fas fa-check valid-icon"></i>
            </div>
            <div class="password-strength">
              <div class="password-strength-bar" id="studentPasswordStrength"></div>
            </div>
            <div class="password-strength-text" id="studentPasswordStrengthText"></div>
          </div>
          
          <div class="form-group">
            <div class="verification">
              <div class="form-control">
                <input type="number" name="verificationCode" placeholder="Enter code" required>
                <i class="fas fa-shield-alt"></i>
                <span class="floating-label">Verification Code</span>
              </div>
              <button type="button" onclick="sendVerification('studentEmail', 'student')">Send Code</button>
            </div>
          </div>
          
          <button type="submit" class="submit-btn">Sign Up as Student</button>
        </form>
      </div>
      
      <div class="links">
        <p>Already have an account? <a href="/login">Login</a></p>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize AOS animation library
      AOS.init({
        duration: 1000,
        once: true,
        offset: 50
      });
      
      // Initialize Particles.js
      particlesJS("particles-js", {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: "#ffffff" },
          shape: { type: "circle" },
          opacity: { value: 0.5, random: true },
          size: { value: 3, random: true },
          line_linked: {
            enable: true,
            distance: 150,
            color: "#ffffff",
            opacity: 0.4,
            width: 1
          },
          move: {
            enable: true,
            speed: 2,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false
          }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "grab" },
            onclick: { enable: true, mode: "push" },
            resize: true
          },
          modes: {
            grab: { distance: 140, line_linked: { opacity: 1 } },
            push: { particles_nb: 4 }
          }
        },
        retina_detect: true
      });
      
      // Setup input validation
      setupFormValidation();
      
      // Setup password strength
      setupPasswordStrength();
    });
    
    function showTab(tab) {
      // Hide all tab contents
      document.getElementById('teacher').classList.remove('active');
      document.getElementById('student').classList.remove('active');
      
      // Show the selected tab content
      document.getElementById(tab).classList.add('active');
      
      // Update tab buttons
      document.getElementById('teacherTab').classList.remove('active');
      document.getElementById('studentTab').classList.remove('active');
      document.getElementById(tab + 'Tab').classList.add('active');
      
      // Update tab indicator
      const tabButtonsContainer = document.getElementById('tabButtonsContainer');
      if (tab === 'student') {
        tabButtonsContainer.classList.add('student-active');
      } else {
        tabButtonsContainer.classList.remove('student-active');
      }
    }
    
    function sendVerification(emailFieldId, userType) {
      const emailField = document.getElementById(emailFieldId);
      const email = emailField.value;
      
      if (email && validateEmail(email)) {
        // Show loading state on button
        const button = event.target;
        const originalText = button.textContent;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
        button.disabled = true;
        
        // Simulate API call with timeout
        setTimeout(() => {
          button.innerHTML = '<i class="fas fa-check"></i> Sent!';
          
          // Reset button after 3 seconds
          setTimeout(() => {
            button.textContent = originalText;
            button.disabled = false;
          }, 3000);
          
          // Show notification
          showNotification(`Verification code sent to ${email}`, 'success');
        }, 1500);
        
      } else {
        if (!email) {
          showNotification('Please enter your email address first.', 'error');
        } else {
          showNotification('Please enter a valid email address.', 'error');
        }
        emailField.focus();
      }
    }
    
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    
    function setupFormValidation() {
      // Input fields to validate
      const fields = [
        { id: 'teacherName', validate: (val) => val.length >= 3 },
        { id: 'teacherOrg', validate: (val) => val.length >= 2 },
        { id: 'teacherEmail', validate: validateEmail },
        { id: 'studentName', validate: (val) => val.length >= 3 },
        { id: 'studentOrg', validate: (val) => val.length >= 2 },
        { id: 'studentEmail', validate: validateEmail }
      ];
      
      fields.forEach(field => {
        const el = document.getElementById(field.id);
        if (!el) return;
        
        el.addEventListener('input', () => {
          const formControl = el.closest('.form-control');
          if (field.validate(el.value)) {
            formControl.classList.add('valid');
          } else {
            formControl.classList.remove('valid');
          }
        });
        
        el.addEventListener('blur', () => {
          const formControl = el.closest('.form-control');
          if (el.value && !field.validate(el.value)) {
            formControl.classList.add('invalid');
            formControl.classList.remove('valid');
          } else {
            formControl.classList.remove('invalid');
          }
        });
      });
    }
    
    function setupPasswordStrength() {
      const passwords = [
        { inputId: 'teacherPassword', barId: 'teacherPasswordStrength', textId: 'teacherPasswordStrengthText' },
        { inputId: 'studentPassword', barId: 'studentPasswordStrength', textId: 'studentPasswordStrengthText' }
      ];
      
      passwords.forEach(pass => {
        const passwordInput = document.getElementById(pass.inputId);
        const strengthBar = document.getElementById(pass.barId);
        const strengthText = document.getElementById(pass.textId);
        
        passwordInput.addEventListener('input', () => {
          const strength = checkPasswordStrength(passwordInput.value);
          
          // Update strength bar
          strengthBar.style.width = strength.score * 25 + '%';
          strengthBar.style.backgroundColor = strength.color;
          
          // Update text
          strengthText.textContent = strength.text;
          strengthText.style.color = strength.color;
          
          // Update valid state
          const formControl = passwordInput.closest('.form-control');
          if (strength.score >= 2) {
            formControl.classList.add('valid');
          } else {
            formControl.classList.remove('valid');
          }
        });
      });
    }
    
    function checkPasswordStrength(password) {
      let score = 0;
      
      if (password.length > 6) score++;
      if (password.length > 10) score++;
      if (/\d/.test(password)) score++;
      if (/[A-Z]/.test(password)) score++;
      if (/[!@#$%^&*]/.test(password)) score++;
      
      // Cap at 4
      score = Math.min(score, 4);
      
      const results = [
        { score: 0, text: '', color: '#e0e0e0' },
        { score: 1, text: 'Weak', color: '#f44336' },
        { score: 2, text: 'Fair', color: '#ff9800' },
        { score: 3, text: 'Good', color: '#2196f3' },
        { score: 4, text: 'Strong', color: '#4caf50' }
      ];
      
      return results[score];
    }
    
    function showNotification(message, type) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = 'notification ' + type;
      notification.innerHTML = `
        <div class="notification-content">
          <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
          <span>${message}</span>
        </div>
      `;
      
      // Style the notification
      Object.assign(notification.style, {
        position: 'fixed',
        bottom: '20px',
        right: '20px',
        backgroundColor: type === 'success' ? '#4CAF50' : '#F44336',
        color: 'white',
        padding: '12px 20px',
        borderRadius: '4px',
        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
        zIndex: '1000',
        display: 'flex',
        alignItems: 'center',
        minWidth: '200px',
        maxWidth: '400px',
        transform: 'translateX(120%)',
        transition: 'transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
        fontFamily: "'Roboto', sans-serif"
      });
      
      // Add to DOM
      document.body.appendChild(notification);
      
      // Trigger animation
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 10);
      
      // Remove after timeout
      setTimeout(() => {
        notification.style.transform = 'translateX(120%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 400);
      }, 4000);
    }
  </script>